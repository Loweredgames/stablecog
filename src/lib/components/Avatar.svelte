<script lang="ts">
	export let str: string;
	export { classes as class };
	let classes = 'w-12 h-12';

	function hashCode(str: string) {
		let hash = 0;
		if (str.length == 0) return hash;
		for (let i = 0; i < str.length; i++) {
			const char = str.charCodeAt(i);
			hash = (hash << 5) - hash + char;
			hash = hash & hash; // Convert to 32bit integer
		}
		return hash;
	}

	$: hash = Math.abs(hashCode(str)).toString();
	$: xpos = hash.substring(0, 3);
	$: ypos = hash.substring(1, 4);
	$: deg = hash.substring(2, 5);
	$: bp = xpos + 'px ' + ypos + 'px';
</script>

<div
	style="background-position: {bp}; filter: hue-rotate({+deg}deg)"
	class="b64 overflow-hidden bg-repeat block {classes}"
/>

<style>
	.b64 {
		background-size: 300%;
		background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDUwMCA1MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj4KICAgIDxwYXRoIGQ9Ik01MDAgMEgwdjUwMGg1MDBWMFoiIGZpbGw9IiNmZmYiLz4KICAgIDxwYXRoIGQ9Ik01MDAgMEgwdjUwMGg1MDBWMFoiIGZpbGw9IiMzMzIzM0MiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJNMTcwIDE1OC43Yy0uNC05LjcgMTAuOC0xMi4yIDE0LjMtMTIuNiAzLjUtLjQgMjkuMyAwIDQzLjcgMTYuM2E3Mi4yIDcyLjIgMCAwIDEgMTUuMyA1OWMtNC4zIDE2LTIxLjQgMjguMy0zNyAxOS40LTE1LjctOC45LTEzLjYtMjMuMi0xMS4zLTM2LjEgMi4zLTEzLTMuNC0yMi0xMS4yLTI1LjctNy43LTMuNy0xMy41LTguMS0xMy45LTIwLjNaIiBmaWxsPSIjQzBGQ0Y4Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0ibTE1NC45IDE4NS40LTYzLjMtMjctMjYuNSA2NC4zIDYzLjIgMjcgMjYuNi02NC4zWiIgZmlsbD0iIzNFOTM0MSIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGQ9Im0yOTMgOTQuNi05LjYtOS42LTQ4LjQgNTAgOS43IDkuNiA0OC40LTUwWiIgZmlsbD0iI0YyOUZEQiIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGQ9Ik0yOTIgMjExYzkuNCAwIDE3LTcuOCAxNy0xNy41cy03LjYtMTcuNS0xNy0xNy41LTE3IDcuOC0xNyAxNy41IDcuNiAxNy41IDE3IDE3LjVaIiBmaWxsPSIjMjQ0NDZBIi8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTIxMS41IDExOGM1LjggMCAxMC41LTUgMTAuNS0xMXMtNC43LTExLTEwLjUtMTEtMTAuNSA1LTEwLjUgMTEgNC43IDExIDEwLjUgMTFaIiBmaWxsPSIjRTJDMzFFIi8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTMzMi41IDQzM2M1LjggMCAxMC41LTUgMTAuNS0xMXMtNC43LTExLTEwLjUtMTEtMTAuNSA1LTEwLjUgMTEgNC43IDExIDEwLjUgMTFaIiBmaWxsPSIjNEQ5QzUwIi8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTM5Mi42IDMyOWM2LjQgNC4zIDE0LjMgMy42IDE3LjctMS41IDMuMy01IC44LTEyLjYtNS42LTE2LjgtNi40LTQuMy0xNC4zLTMuNi0xNy42IDEuNS0zLjQgNS0uOSAxMi42IDUuNSAxNi44WiIgZmlsbD0iI0MwRkNGOCIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJtMTMzIDU1LjUgMzMuMiAxNS4yIDE0LjQtMzQgNDIgMTkuMy03LjkgMTgtMjQuMS0xMS4xLTE0LjQgMzRMMTQzIDgxLjVsLTE0LjQgMzQtNDItMTkuMyA3LjktMTggMjQuMiAxMS4xIDE0LjQtMzRaIiBmaWxsPSIjRkY3OTc5Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTS0xNyA4Ni44YzAtNDcuNyAzOS42LTUzLjMgNTkuNC01MCAyOS4xIDQuNyAwIDM1LjktMTAgNTQuNS0xMC4yIDE4LjYgMTkuNSAzOS4xIDAgNDkuNEMxMi42IDE1MS0xNyAxNDYuNS0xNyA4Ni43Wk00ODMgODYuOGMwLTQ3LjcgMzkuNi01My4zIDU5LjQtNTAgMjkuMSA0LjcgMCAzNS45LTEwIDU0LjUtMTAuMiAxOC42IDE5LjUgMzkuMSAwIDQ5LjQtMTkuNyAxMC4zLTQ5LjQgNS44LTQ5LjQtNTRaIiBmaWxsPSIjMkY5RkE2Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTkyLjggMjc0LjJjMy4zIDcuMy01LjYgMTQuMS04LjUgMTYtMi45IDEuOC0yOS4zIDQuMS00Ny0yLTE3LjgtNi0yNy0xNS40LTI4LjUtMjkuNC0xLjMtMTQuMSA5LjYtMzEgMjYuMS0zMS4yIDE2LjUtLjIgMTkuMiAxMS43IDIxLjMgMjIuNiAyLjIgMTAuOSAxMCAxNS4yIDE4IDE0LjcgNy45LS42IDE0LjQuMSAxOC42IDkuM1oiIGZpbGw9IiNGODIxOTUiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJtMjYxLjYtMy4zLTI1LTEwLjdMMjI2IDExLjVsMjUuMSAxMC44IDEwLjUtMjUuNlpNMjYxLjYgNDk2LjdsLTI1LTEwLjctMTAuNiAyNS41IDI1LjEgMTAuOCAxMC41LTI1LjZaIiBmaWxsPSIjNUVDNUZGIi8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0ibTE2NC4yIDIzLjIgMy4zLTEzLjVMMTQyIDMuMWwtMy4zIDEzLjQgMjUuNiA2LjdaIiBmaWxsPSIjMDA4QTQwIi8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTM2IDE5M2M5LjQgMCAxNy03LjggMTctMTcuNVM0NS40IDE1OCAzNiAxNThzLTE3IDcuOC0xNyAxNy41UzI2LjYgMTkzIDM2IDE5M1oiIGZpbGw9IiM1NkEwRjgiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJNNDc2LjEgMTY1LjJjNS44LTYgMi4yLTE4LjctOC0yOC41LTEwLTkuOC0yMy0xMi45LTI4LjctNi45LTUuNyA2LTIuMiAxOC43IDggMjguNSAxMCA5LjggMjMgMTIuOSAyOC43IDYuOVoiIGZpbGw9IiMzNTUzNzYiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJNMjkgMzkxYzMuOCA3LjMgMTcgOCAyOS41IDEuNEM3MSAzODYgNzggMzc0LjYgNzQuMSAzNjcuM2MtMy44LTcuNC0xNy04LTI5LjUtMS40QzMyIDM3Mi40IDI1IDM4My43IDI5IDM5MVoiIGZpbGw9IiNGMjlGREIiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJNMTY5IDMxMWMxNC40IDAgMjYtMTEuOSAyNi0yNi41YTI2LjMgMjYuMyAwIDAgMC0yNi0yNi41Yy0xNC40IDAtMjYgMTEuOS0yNiAyNi41YTI2LjMgMjYuMyAwIDAgMCAyNiAyNi41WiIgZmlsbD0iZ29sZCIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJtMjk1IDI3OS44LTI3LjggMy45IDQuMyAyOC4zLTM1LjQgNC45LTItMTUgMjAuMy0zLTQuMy0yOC4yTDI3OCAyNjdsLTQuMy0yOC4zIDM1LjQtNSAyIDE1LjEtMjAuMyAyLjkgNC4zIDI4LjJaIiBmaWxsPSIjRjE5N0Q4Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTMwNi42IDE1OC44Yy0yMC4xLTEyLTEyLjMtMzAuOC01LjktMzguNiA5LjQtMTEuNSAyOC4yIDEuMSAzMy41IDEwLjMgNS4zIDkgNS40IDE3LjUgNC43IDI4LjctLjcgMTEuMS03LjEgMTQuNy0zMi4zLS40WiIgZmlsbD0iI0U4MjE4RSIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGQ9Im00NjkuOCAxOTUtNjMuMy0yNy0yNi41IDY0LjMgNjMuMiAyNyAyNi42LTY0LjNaIiBmaWxsPSIjRkY4NDg0Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTMxMi45IDgwYy0zNS41LTI5LjUtNDEuNC01MC0yNC40LTY1LjYgMjUtMjMgMzkuNiAxOS41IDQ1LjkgNDAgNi4zIDIwLjUgNTguMi0uNyA1MS4zIDIzLjEtNi45IDIzLjgtMjguNSAzOS41LTcyLjggMi41WiIgZmlsbD0iIzM5RkZGRiIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGQ9Ik00MDEuNSAyNjZjMi44IDYuNC01LjcgMTIuOC04LjQgMTQuNi0yLjcgMS43LTI0IDEyLjUtNDAuMSA3LjctMTYuMi00LjgtMjcuNi0yMC41LTI4LjQtMzMtLjgtMTIuNSAxMC0yOCAyNS4xLTI4LjggMTUuMi0uOCAxNy40IDkuOCAxOSAxOS40IDEuNSA5LjYgOC42IDEzLjMgMTYgMTIuNSA3LjMtLjggMTMuMi0uNCAxNi44IDcuNloiIGZpbGw9IiMzQzYyQzYiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJtNDU5LjMgMjguMiAzLjQtMTMuNUw0MzcgOC4xbC0zLjQgMTMuNCAyNS42IDYuN1oiIGZpbGw9IiNGRkU5NzMiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJNMzc4IDE3OWExNyAxNyAwIDEgMCAwLTM0IDE3IDE3IDAgMCAwIDAgMzRaIiBmaWxsPSIjNTZBMEY4Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTQ2Mi41IDMxOGEyNi41IDI2LjUgMCAxIDAgMC01MyAyNi41IDI2LjUgMCAwIDAgMCA1M1oiIGZpbGw9IiNGM0E3REUiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJNMTAzLjUgMzkwLjNjMTEuOC0zLjcgMjEuMiAxMi42IDIzLjYgMTcuOCAyLjUgNS4yIDE2LjUgNDUgNC41IDcyLjUtMTIgMjcuNi00Mi4yIDQ0LjYtNjQuMiA0My40LTIyLTEuMi00Ni43LTIzLjQtNDQuNi01MC40IDIuMi0yNyAyMS0yOC42IDM4LjItMjkuNCAxNy4yLS43IDI1LjEtMTIuNiAyNS40LTI1LjcuMy0xMyAyLjQtMjMuNSAxNy4xLTI4LjJaTTEwMy41LTEwOS43YzExLjgtMy43IDIxLjIgMTIuNiAyMy42IDE3LjggMi41IDUuMiAxNi41IDQ1IDQuNSA3Mi41LTEyIDI3LjYtNDIuMiA0NC42LTY0LjIgNDMuNC0yMi0xLjItNDYuNy0yMy40LTQ0LjYtNTAuNEMyNS01My40IDQzLjgtNTUgNjEtNTUuOGMxNy4yLS43IDI1LjEtMTIuNiAyNS40LTI1LjcuMy0xMyAyLjQtMjMuNSAxNy4xLTI4LjJaIiBmaWxsPSIjRjE1QTVBIi8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTI4My41IDM4MS40IDI3MSAzNzZsLTI2LjYgNjQuNCAxMi42IDUuMyAyNi41LTY0LjNaIiBmaWxsPSIjQzBGQ0Y4Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0ibTQyOC44IDg1LjEtMTIuNS01LjQtMTQuMyAzNC42IDEyLjUgNS40TDQyOC44IDg1WiIgZmlsbD0iIzZBQzlGRiIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGQ9Ik0xLjUgNDU1YTI2LjUgMjYuNSAwIDEgMCAwLTUzIDI2LjUgMjYuNSAwIDAgMCAwIDUzWk01MDIuNSA0NTVhMjYuNSAyNi41IDAgMSAwIDAtNTMgMjYuNSAyNi41IDAgMCAwIDAgNTNaIiBmaWxsPSIjQkJFQjk1Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Im0xNzcuMSAzNDEuNS00IDQ1LjMgNDYgMi44LTUgNTcuNS0yNC41LTEuOCAzLTMzLjEtNDYtMi43IDQtNDUuMy00Ni0yLjggNS4xLTU3LjUgMjQuNCAxLjgtMyAzMy4xIDQ2IDIuN1oiIGZpbGw9IiM2QUM5RkYiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJtMjQwLjYgMzQ1LjctMjUtMTAuNy0xMC42IDI1LjUgMjUuMSAxMC44IDEwLjUtMjUuNloiIGZpbGw9IiM1RUM1RkYiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJtNzggMzM1IDMuNy0xNC44TDQyLjQgMzEwbC0zLjcgMTQuOEw3OCAzMzVaIiBmaWxsPSIjNjNBOEY5Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTMzMS42IDQ1MS44YzM0LjEgMTEuMiAyOC44IDQxLjggMjEuOCA1NS43LTEwLjIgMjAuMy0yNS43LTguNS0zNi42LTIwLjQtMTEtMTEuOS0zMi43IDUuMi0zNS40LTExLjctMi43LTE2LjkgNy41LTM3LjggNTAuMi0yMy42WiIgZmlsbD0iI0I1RUE4QyIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGQ9Im0zNTYuOCAzMjMtNjMuMy0yNy0yNi41IDY0LjMgNjMuMiAyNyAyNi42LTY0LjNaIiBmaWxsPSIjNTZBMEY4Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Im00MDUuMyAzNDguMyA0MS40IDE5IDE4LTQyLjQgNTIuNSAyNC0xMCAyMi40LTMwLjEtMTMuOC0xOCA0Mi4zLTQxLjMtMTktMTggNDIuNC01Mi41LTI0IDkuOS0yMi40IDMwLjIgMTMuOCAxOC00Mi4zWiIgZmlsbD0iI0ZGRUY5OSIvPgogICAgPHBhdGggb3BhY2l0eT0iLjkiIGQ9Im0zOTEgNTMuOCAxMy4yLTQuNS04LjQtMjUtMTMgNC40IDguMyAyNVoiIGZpbGw9IiMwMEZGNzUiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBkPSJNNDI0IDQ2N2ExNyAxNyAwIDEgMCAwLTM0IDE3IDE3IDAgMCAwIDAgMzRaIiBmaWxsPSIjNTZBMEY4Ii8+CiAgICA8cGF0aCBvcGFjaXR5PSIuOSIgZD0iTTMzMS42LTQ4LjNDMzY1LjctMzcgMzYwLjQtNi40IDM1My40IDcuNSAzNDMuMiAyNy44IDMyNy43LTEgMzE2LjgtMTNjLTExLTExLjktMzIuNyA1LjItMzUuNC0xMS43LTIuNy0xNi45IDcuNS0zNy43IDUwLjItMjMuN1oiIGZpbGw9IiNCNUVBOEMiLz4KICAgIDxwYXRoIG9wYWNpdHk9Ii45IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibS05NC43IDM0OC4zIDQxLjQgMTkgMTgtNDIuNCA1Mi41IDI0LTEwIDIyLjQtMzAuMS0xMy44LTE4IDQyLjMtNDEuMy0xOS0xOCA0Mi40LTUyLjUtMjQgOS45LTIyLjQgMzAuMiAxMy44IDE4LTQyLjNaIiBmaWxsPSIjRkZFRjk5Ii8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJhIj4KICAgICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTAgMGg1MDB2NTAwSDB6Ii8+CiAgICA8L2NsaXBQYXRoPgogIDwvZGVmcz4KPC9zdmc+Cg==');
	}
</style>
